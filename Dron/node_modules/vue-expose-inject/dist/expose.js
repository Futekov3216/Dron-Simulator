'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var _util = require('./util');

function retrieveExposedProperties(vm) {
    var expose = vm.$options.expose;

    if ((0, _util.isFunction)(expose)) {
        return expose.call(vm);
    }

    if ((0, _util.isArray)(expose)) {
        return expose.reduce(function (expose, property) {
            if (!vm.hasOwnProperty(property)) {
                throw new Error('Can\'t expose `' + property + '` since it\'s not set');
            }

            expose[property] = vm[property];

            return expose;
        }, {});
    }

    throw new Error('`expose` must be an array or a factory method, `' + (typeof expose === 'undefined' ? 'undefined' : _typeof(expose)) + '` given');
}

var expose = {
    created: function created() {
        if (this.$options.expose === undefined) {
            return;
        }

        this.$exposed = retrieveExposedProperties(this);
    }
};

exports.default = expose;